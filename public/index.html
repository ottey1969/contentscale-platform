<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ContentScale - Free AI SEO Scanner & Global Leaderboard</title>
  <meta name="description" content="Free AI-powered SEO content scanner. Get your GRAAF + CRAFT + Technical SEO score instantly!">
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    /* NAVIGATION */
    .nav-bar { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); border-bottom: 2px solid #374151; position: sticky; top: 0; z-index: 1000; }
    .nav-link { color: #9ca3af; padding: 12px 20px; font-weight: 600; transition: all 0.3s; border-bottom: 3px solid transparent; cursor: pointer; text-decoration: none; }
    .nav-link:hover { color: white; border-bottom-color: #8b5cf6; }
    .nav-link.active { color: white; border-bottom-color: #8b5cf6; }
    
    /* HAMBURGER MENU */
    .hamburger { display: none; flex-direction: column; gap: 4px; cursor: pointer; padding: 8px; }
    .hamburger span { width: 25px; height: 3px; background: white; border-radius: 2px; transition: all 0.3s; }
    .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(6px, 6px); }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(6px, -6px); }
    
    .mobile-menu { display: none; position: fixed; top: 65px; left: 0; right: 0; background: linear-gradient(135deg, #1f2937 0%, #111827 100%); border-bottom: 2px solid #374151; padding: 20px; z-index: 999; }
    .mobile-menu.active { display: block; }
    .mobile-menu .nav-link { display: block; padding: 12px 0; border-bottom: 1px solid #374151; border-left: none; }
    .mobile-menu .nav-link:last-child { border-bottom: none; }
    
    /* SCANNER & LEADERBOARD */
    .scanner-section { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); border-radius: 16px; padding: 32px; border: 2px solid #374151; margin-bottom: 32px; }
    
    /* SCAN BUTTON - MOBILE FIRST */
    .scan-btn-mobile {
      background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      padding: 14px 24px;
      border-radius: 12px;
      font-weight: 700;
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 16px;
      width: 100%;
      text-align: center;
      white-space: nowrap;
    }
    
    .scan-btn-mobile:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
    }
    
    .scan-btn-mobile:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Desktop: larger button */
    @media (min-width: 640px) {
      .scan-btn-mobile {
        padding: 16px 40px;
        font-size: 18px;
        width: auto;
        min-width: 160px;
      }
    }
    
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .scan-spinner { display: inline-block; width: 18px; height: 18px; border: 3px solid rgba(255, 255, 255, 0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; margin-right: 10px; vertical-align: middle; }
    
    .leaderboard-section { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 16px; padding: 32px; margin-bottom: 32px; border: 2px solid #334155; }
    
    /* FOOTER */
    .contentscale-footer { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); border-top: 2px solid #374151; padding: 4rem 0 2rem; margin-top: 4rem; color: #d1d5db; text-align: center; }
    .contentscale-container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
    .contentscale-footer h3 { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #a78bfa; }
    .contentscale-footer p { line-height: 1.8; margin-bottom: 1.5rem; color: #9ca3af; }
    .contentscale-footer a { color: #60a5fa; text-decoration: none; transition: color 0.2s; }
    .contentscale-footer a:hover { color: #93c5fd; text-decoration: underline; }
    
    @media (max-width: 768px) { 
      .hamburger { display: flex; }
      .scanner-section, .leaderboard-section { padding: 20px; }
      .scanner-section h2 { font-size: 1.75rem; }
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100">

  <!-- NAVIGATION -->
  <nav class="nav-bar">
    <div class="max-w-6xl mx-auto px-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <a href="/" style="text-decoration: none;">
            <div class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent">ContentScale</div>
          </a>
        </div>
        
        <div class="hidden md:flex items-center gap-1">
          <a class="nav-link active" onclick="scrollToSection('home')">üè† Home</a>
          <a class="nav-link" onclick="scrollToSection('scanner')">üîç Scanner</a>
          <a class="nav-link" onclick="scrollToSection('leaderboard')">üèÜ Leaderboard</a>
          <a class="nav-link" onclick="scrollToSection('contact')">üìû Contact</a>
        </div>
        
        <div class="hamburger md:hidden" onclick="toggleMobileMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
    
    <div class="mobile-menu" id="mobileMenu">
      <a class="nav-link" onclick="scrollToSection('home'); toggleMobileMenu()">üè† Home</a>
      <a class="nav-link" onclick="scrollToSection('scanner'); toggleMobileMenu()">üîç Scanner</a>
      <a class="nav-link" onclick="scrollToSection('leaderboard'); toggleMobileMenu()">üèÜ Leaderboard</a>
      <a class="nav-link" onclick="scrollToSection('contact'); toggleMobileMenu()">üìû Contact</a>
    </div>
  </nav>

  <div class="max-w-6xl mx-auto p-8">
    
    <!-- HOME -->
    <div id="home" class="text-center mb-12 pt-8">
      <h1 class="text-5xl font-bold mb-3 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">üèÜ Global AI SEO Leaderboard</h1>
      <p class="text-xl text-gray-300 mb-4">The World's First AI-Era Content Quality Rankings</p>
      <div class="mt-6 text-gray-400 max-w-3xl mx-auto">
        <p>Free AI-powered content analysis using GRAAF (50pts) + CRAFT (30pts) + Technical SEO (20pts) = 100 points total.</p>
      </div>
    </div>

    <!-- SCANNER -->
    <div id="scanner" class="scanner-section">
      <div class="text-center mb-8">
        <h2 class="text-4xl font-bold mb-3">üöÄ Scan Your Website</h2>
        <p class="text-gray-300">Get your AI-Era SEO score instantly!</p>
      </div>
      <div class="max-w-3xl mx-auto">
        <div class="flex flex-col sm:flex-row gap-3 mb-5">
          <input type="text" id="scanInput" placeholder="https://yourwebsite.com" class="flex-1 bg-gray-700 text-white px-4 sm:px-6 py-3 sm:py-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-base sm:text-lg">
          <button onclick="performScan()" id="scanButton" class="scan-btn-mobile">
            Scan Now
          </button>
        </div>
        
        <div class="bg-gray-800 bg-opacity-70 rounded-lg p-4 text-sm text-gray-400">
          <div class="font-bold text-green-400 mb-2">‚úÖ Free Analysis Includes:</div>
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div>‚Ä¢ GRAAF Framework (50 pts)</div>
            <div>‚Ä¢ CRAFT Methodology (30 pts)</div>
            <div>‚Ä¢ Technical SEO (20 pts)</div>
            <div>‚Ä¢ AI Improvement Prompts</div>
          </div>
        </div>

        <!-- LEADERBOARD CHECKBOX -->
        <div class="mt-4 bg-gray-800 bg-opacity-50 rounded-lg p-4">
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="checkbox" id="submitToLeaderboard" class="w-5 h-5 rounded border-gray-600 text-purple-600 focus:ring-purple-500">
            <span class="text-sm text-gray-300">üìä Submit my score to the global leaderboard (optional)</span>
          </label>
          <div id="companyNameField" class="mt-3 hidden">
            <input type="text" id="companyName" placeholder="Company name (optional)" class="w-full bg-gray-700 text-white px-4 py-2 rounded-lg text-sm">
          </div>
        </div>
      </div>
    </div>

    <!-- LEADERBOARD -->
    <div id="leaderboard" class="leaderboard-section">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-3xl font-bold text-yellow-400">Top Websites</h2>
          <p class="text-sm text-gray-400 mt-1">Ranked by total score (100 points max)</p>
        </div>
        <button onclick="refreshLeaderboard()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm font-semibold transition">üîÑ Refresh</button>
      </div>
      
      <div id="leaderboard-container">
        <div class="text-center py-12">
          <div class="text-5xl mb-4">üîç</div>
          <div class="text-gray-400">Loading leaderboard...</div>
        </div>
      </div>
    </div>

    <!-- CONTACT -->
    <div id="contact" class="py-12">
      <div class="text-center mb-12">
        <div class="text-7xl mb-4 animate-bounce">üìû</div>
        <h2 class="text-4xl font-bold mb-3 bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent">üìû Get In Touch</h2>
        <p class="text-gray-400 text-lg">Questions? Want expert SEO help?</p>
      </div>

      <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-8">
        
        <!-- CONTACT INFO -->
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-8 border border-gray-700">
          <h3 class="text-2xl font-bold mb-6">Contact</h3>
          <div class="space-y-6">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-2xl">üìß</div>
              <div>
                <div class="text-sm text-gray-400 mb-1">Email</div>
                <a href="mailto:info@contentscale.site" class="text-lg font-semibold text-blue-400 hover:text-blue-300">info@contentscale.site</a>
              </div>
            </div>
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center text-2xl">üí¨</div>
              <div>
                <div class="text-sm text-gray-400 mb-1">WhatsApp</div>
                <a href="https://wa.me/31628073996" target="_blank" class="text-lg font-semibold text-green-400 hover:text-green-300">+31 628 073 996</a>
              </div>
            </div>
          </div>
        </div>

        <!-- WHATSAPP CTA -->
        <div class="bg-gradient-to-br from-green-900 to-green-800 rounded-xl p-8 border-2 border-green-600">
          <div class="text-center mb-8">
            <div class="text-7xl mb-4 animate-bounce">üí¨</div>
            <h3 class="text-3xl font-bold mb-3 text-white">Let's Talk!</h3>
          </div>
          <a href="https://wa.me/31628073996?text=Hi!%20I%27d%20like%20to%20learn%20more%20about%20ContentScale" 
             target="_blank"
             class="block w-full bg-white hover:bg-green-50 text-green-900 text-center py-5 rounded-xl font-bold text-xl transition transform hover:scale-105">
            üí¨ Start WhatsApp Chat ‚Üí
          </a>
        </div>
      </div>
    </div>

  </div>
  
  <!-- FOOTER -->
  <footer class="contentscale-footer">
    <div class="contentscale-container">
      <h3>ContentScale ‚Äì SEO Platform & Recovery Services</h3>
      <p>AI-powered analysis with GRAAF + CRAFT + Technical SEO scoring</p>
      <p style="margin: 0; font-size: 0.95rem;">¬© 2025 ContentScale | <a href="mailto:info@contentscale.site">Contact</a> | <a href="/admin">Admin</a></p>
    </div>
  </footer>

  <script>
    console.log('%cüöÄ ContentScale v2.1 - PRODUCTION','color:#8b5cf6;font-size:16px;font-weight:bold');
    
    // API BASE
    const API_BASE = window.location.origin;
    
    // ==========================================
    // NAVIGATION
    // ==========================================
    
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      const hamburger = document.querySelector('.hamburger');
      menu.classList.toggle('active');
      hamburger.classList.toggle('active');
    }
    
    function scrollToSection(sectionId) {
      const element = document.getElementById(sectionId);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        const menu = document.getElementById('mobileMenu');
        const hamburger = document.querySelector('.hamburger');
        if (menu && menu.classList.contains('active')) {
          menu.classList.remove('active');
          hamburger.classList.remove('active');
        }
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('onclick')?.includes(sectionId)) {
            link.classList.add('active');
          }
        });
      }
    }
    
    // ==========================================
    // SCANNER - PRODUCTION READY
    // ==========================================
    
    async function performScan() {
      const input = document.getElementById('scanInput');
      const button = document.getElementById('scanButton');
      const url = input.value.trim();
      
      if (!url) {
        alert('‚ö†Ô∏è Please enter a URL');
        return;
      }
      
      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        alert('‚ö†Ô∏è Please enter a valid URL starting with http:// or https://');
        return;
      }
      
      button.disabled = true;
      button.innerHTML = '<span class="scan-spinner"></span>Scanning...';
      
      try {
        console.log('[SCAN] Starting scan for:', url);
        
        // ‚úÖ CORRECT ENDPOINT: /api/scan-free
        const response = await fetch(`${API_BASE}/api/scan-free`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url: url })
        });
        
        console.log('[SCAN] Response status:', response.status);
        
        if (!response.ok) {
          const errorData = await response.json().catch(() => ({}));
          throw new Error(errorData.error || `Scan failed (HTTP ${response.status})`);
        }
        
        const result = await response.json();
        console.log('[SCAN] Result:', result);
        
        if (!result.success) {
          throw new Error(result.error || 'Scan failed');
        }
        
        // ‚úÖ SHOW RESULTS
        const totalIssues = result.recommendations?.summary?.totalIssues || 0;
        alert(`‚úÖ Scan Complete!\n\nüéØ Score: ${result.score}/100\nüìä Quality: ${result.quality}\nüí° Improvements: ${totalIssues} recommendations\n\nCheck your email for the full report!`);
        
        // ‚úÖ SUBMIT TO LEADERBOARD IF CHECKED
        const submitCheckbox = document.getElementById('submitToLeaderboard');
        if (submitCheckbox && submitCheckbox.checked) {
          await submitToLeaderboard(result);
        }
        
        // Refresh leaderboard
        await refreshLeaderboard();
        
      } catch (error) {
        console.error('[SCAN ERROR]', error);
        alert(`‚ùå Scan Failed\n\n${error.message}\n\nPlease try again or contact support at info@contentscale.site`);
      } finally {
        button.disabled = false;
        button.innerHTML = 'Scan Now';
      }
    }
    
    // ==========================================
    // LEADERBOARD SUBMIT
    // ==========================================
    
    async function submitToLeaderboard(scanResult) {
      try {
        const companyName = document.getElementById('companyName')?.value || '';
        
        const response = await fetch(`${API_BASE}/api/leaderboard/submit`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            url: scanResult.url,
            score: scanResult.score,
            quality: scanResult.quality,
            graaf_score: scanResult.breakdown?.graaf?.total || 0,
            craft_score: scanResult.breakdown?.craft?.total || 0,
            technical_score: scanResult.breakdown?.technical?.total || 0,
            word_count: scanResult.wordCount || 0,
            company_name: companyName
          })
        });
        
        if (response.ok) {
          console.log('[LEADERBOARD] ‚úÖ Submitted successfully');
        } else {
          console.error('[LEADERBOARD] ‚ùå Submit failed:', response.status);
        }
      } catch (error) {
        console.error('[LEADERBOARD] Submit error:', error);
      }
    }
    
    // ==========================================
    // LEADERBOARD - PRODUCTION READY
    // ==========================================
    
    async function refreshLeaderboard() {
      const container = document.getElementById('leaderboard-container');
      
      try {
        container.innerHTML = `
          <div class="text-center py-12">
            <div class="scan-spinner mx-auto mb-4" style="width: 40px; height: 40px; border-width: 4px;"></div>
            <div class="text-gray-400">Loading leaderboard...</div>
          </div>
        `;
        
        console.log('[LEADERBOARD] Fetching from:', `${API_BASE}/api/leaderboard`);
        
        const response = await fetch(`${API_BASE}/api/leaderboard`);
        
        console.log('[LEADERBOARD] Response status:', response.status);
        
        if (!response.ok) {
          throw new Error('Failed to load leaderboard');
        }
        
        const data = await response.json();
        console.log('[LEADERBOARD] Data:', data);
        
        // Handle different response formats
        let entries = [];
        
        if (Array.isArray(data)) {
          entries = data;
        } else if (data.entries && Array.isArray(data.entries)) {
          entries = data.entries;
        } else if (data.success && data.entries) {
          entries = data.entries;
        }
        
        console.log('[LEADERBOARD] Entries:', entries.length);
        
        displayLeaderboard(entries);
        
      } catch (error) {
        console.error('[LEADERBOARD ERROR]', error);
        
        container.innerHTML = `
          <div class="text-center py-12">
            <div class="text-5xl mb-4">üìä</div>
            <div class="text-gray-400 mb-2">No entries yet</div>
            <div class="text-sm text-gray-500 mb-4">Be the first to scan your website!</div>
            <button onclick="scrollToSection('scanner')" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-semibold transition">
              Scan Now
            </button>
          </div>
        `;
      }
    }
    
    function displayLeaderboard(entries) {
      const container = document.getElementById('leaderboard-container');
      
      if (!entries || entries.length === 0) {
        container.innerHTML = `
          <div class="text-center py-12">
            <div class="text-5xl mb-4">üìä</div>
            <div class="text-gray-400 mb-2">No entries yet</div>
            <div class="text-sm text-gray-500 mb-4">Be the first to scan your website!</div>
            <button onclick="scrollToSection('scanner')" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-semibold transition">
              Scan Now
            </button>
          </div>
        `;
        return;
      }
      
      let html = '<div class="space-y-4">';
      
      entries.slice(0, 100).forEach((entry, index) => {
        const rank = entry.rank || (index + 1);
        const medal = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : `#${rank}`;
        const score = entry.score || 0;
        const url = entry.url || 'Unknown';
        const company = entry.company_name || entry.company || '';
        
        html += `
          <div class="bg-gray-800 hover:bg-gray-750 rounded-lg p-4 transition">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4 flex-1 min-w-0">
                <div class="text-2xl font-bold w-12 text-center flex-shrink-0">${medal}</div>
                <div class="min-w-0 flex-1">
                  <div class="font-semibold text-white truncate">${url}</div>
                  ${company ? `<div class="text-sm text-gray-400">${company}</div>` : ''}
                </div>
              </div>
              <div class="text-right flex-shrink-0 ml-4">
                <div class="text-3xl font-bold text-green-400">${score}/100</div>
              </div>
            </div>
          </div>
        `;
      });
      
      html += '</div>';
      container.innerHTML = html;
    }
    
    // ==========================================
    // LEADERBOARD CHECKBOX TOGGLE
    // ==========================================
    
    document.addEventListener('DOMContentLoaded', function() {
      console.log('‚úÖ ContentScale initialized');
      
      // Leaderboard checkbox toggle
      const checkbox = document.getElementById('submitToLeaderboard');
      const companyField = document.getElementById('companyNameField');
      
      if (checkbox && companyField) {
        checkbox.addEventListener('change', function() {
          if (this.checked) {
            companyField.classList.remove('hidden');
          } else {
            companyField.classList.add('hidden');
          }
        });
      }
      
      // Load leaderboard
      refreshLeaderboard();
      
      // Enter key support
      const scanInput = document.getElementById('scanInput');
      if (scanInput) {
        scanInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            performScan();
          }
        });
      }
    });
  </script>

</body>
</html>
